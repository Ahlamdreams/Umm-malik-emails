<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù†Ø§ÙØ°Ø© Ø£Ù… Ù…Ø§Ù„Ùƒ Ø§Ù„Ø°ÙƒÙŠØ© - Ù…Ø¯Ø±Ø³Ø© Ø£Ù… Ù…Ø§Ù„Ùƒ Ø§Ù„Ø£Ù†ØµØ§Ø±ÙŠØ© Ø§Ù„Ø°ÙƒÙŠØ©</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700&display=swap');
        
        body {
            font-family: 'Cairo', sans-serif;
        }
        
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 25%, #f093fb 50%, #f5576c 75%, #4facfe 100%);
            position: relative;
            overflow: hidden;
        }
        
        .gradient-bg::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                radial-gradient(circle at 20% 80%, rgba(120, 119, 198, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(255, 119, 198, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 40% 40%, rgba(120, 219, 255, 0.2) 0%, transparent 50%);
            animation: float 6s ease-in-out infinite;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-10px) rotate(1deg); }
        }
        
        /* Mouse trail effect */
        .mouse-trail {
            position: fixed;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: radial-gradient(circle, rgba(255,255,255,0.8) 0%, rgba(255,255,255,0.3) 50%, transparent 100%);
            pointer-events: none;
            z-index: 9999;
            mix-blend-mode: screen;
            animation: trailFade 0.8s ease-out forwards;
        }
        
        @keyframes trailFade {
            0% {
                transform: scale(1);
                opacity: 1;
            }
            100% {
                transform: scale(0);
                opacity: 0;
            }
        }
        
        /* Click ripple effect */
        .ripple {
            position: fixed;
            border-radius: 50%;
            background: radial-gradient(circle, rgba(255,255,255,0.6) 0%, rgba(255,255,255,0.2) 50%, transparent 100%);
            pointer-events: none;
            z-index: 9998;
            animation: rippleEffect 0.8s ease-out forwards;
        }
        
        @keyframes rippleEffect {
            0% {
                transform: scale(0);
                opacity: 1;
            }
            100% {
                transform: scale(4);
                opacity: 0;
            }
        }
        
        /* Floating particles */
        .particle {
            position: absolute;
            width: 4px;
            height: 4px;
            background: rgba(255,255,255,0.6);
            border-radius: 50%;
            animation: floatParticle 8s infinite linear;
        }
        
        @keyframes floatParticle {
            0% {
                transform: translateY(100vh) translateX(0px) rotate(0deg);
                opacity: 0;
            }
            10% {
                opacity: 1;
            }
            90% {
                opacity: 1;
            }
            100% {
                transform: translateY(-100px) translateX(100px) rotate(360deg);
                opacity: 0;
            }
        }
        
        /* Enhanced background animation */
        body {
            background: linear-gradient(45deg, #1e3c72, #2a5298, #667eea, #764ba2);
            background-size: 400% 400%;
            animation: gradientShift 15s ease infinite;
        }
        
        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        
        .card-shadow {
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }
        
        .loading {
            display: none;
        }
        
        .loading.show {
            display: block;
        }
        
        .pulse-dot {
            animation: pulse-dot 1.5s infinite;
        }
        
        @keyframes pulse-dot {
            0%, 80%, 100% { transform: scale(0); }
            40% { transform: scale(1); }
        }
        
        .student-card {
            background: linear-gradient(145deg, #ffffff 0%, #f8fafc 100%);
            border: 1px solid #e2e8f0;
        }
        
        .info-row {
            border-bottom: 1px solid #f1f5f9;
        }
        
        .info-row:last-child {
            border-bottom: none;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-gray-50 via-blue-50 to-purple-50 min-h-screen">
    <!-- Header -->
    <header class="gradient-bg text-white py-8">
        <div id="particles-container"></div>
        <div class="container mx-auto px-4 relative z-10">
            <div class="text-center">
                <div class="mb-6 flex items-center justify-center">
                    <!-- Ø§Ù„Ø´Ø¹Ø§Ø± Ø§Ù„Ø£ÙŠÙ…Ù† -->
                    <div class="w-20 h-20 md:w-24 md:h-24 bg-white rounded-full shadow-2xl border-4 border-white flex items-center justify-center p-2 overflow-hidden ml-6">
                        <img 
                            src="https://lh3.googleusercontent.com/d/1mtn3vRqkD9EotyQGuBAVxjTKxUyzSr3Y" 
                            alt="Ø´Ø¹Ø§Ø± Ø§Ù„Ù…Ø¯Ø±Ø³Ø© Ø§Ù„Ø£ÙŠÙ…Ù†" 
                            class="w-full h-full object-cover rounded-full"
                            onerror="this.style.display='none'; this.parentElement.innerHTML='<div class=\'w-full h-full bg-gradient-to-br from-blue-500 to-blue-700 rounded-full flex items-center justify-center\'><svg class=\'w-8 h-8 text-white\' fill=\'currentColor\' viewBox=\'0 0 24 24\'><path d=\'M12 3L1 9l4 2.18v6L12 21l7-3.82v-6l2-1.09V17h2V9L12 3zm6.82 6L12 12.72 5.18 9 12 5.28 18.82 9zM17 15.99l-5 2.73-5-2.73v-3.72L12 15l5-2.73v3.72z\'/></svg></div>';"
                        >
                    </div>
                    
                    <!-- Ø§Ù„Ù†ØµÙˆØµ -->
                    <div class="text-center">
                        <h1 class="text-3xl md:text-4xl font-bold mb-2">Ù†Ø§ÙØ°Ø© Ø£Ù… Ù…Ø§Ù„Ùƒ Ø§Ù„Ø°ÙƒÙŠØ©</h1>
                        <h2 class="text-xl md:text-2xl font-semibold mb-4 text-blue-100">Ù…Ø¯Ø±Ø³Ø© Ø£Ù… Ù…Ø§Ù„Ùƒ Ø§Ù„Ø£Ù†ØµØ§Ø±ÙŠØ© Ø§Ù„Ø°ÙƒÙŠØ©</h2>
                        <p class="text-sm md:text-base opacity-90">Ø¥Ø¹Ø¯Ø§Ø¯ ÙˆØªÙ†ÙÙŠØ° Ù…Ø¯ÙŠØ±Ø© Ø§Ù„Ù…Ø¯Ø±Ø³Ø©: Ø£.Ø£Ø­Ù„Ø§Ù… Ø¨Ù†Øª Ø¹Ù„ÙŠ Ø§Ù„Ø­Ù…Ø¯Ø§Ù†ÙŠØ©</p>
                    </div>
                    
                    <!-- Ø§Ù„Ø´Ø¹Ø§Ø± Ø§Ù„Ø£ÙŠØ³Ø± -->
                    <div class="w-20 h-20 md:w-24 md:h-24 bg-white rounded-full shadow-2xl border-4 border-white flex items-center justify-center p-2 overflow-hidden mr-6">
                        <img 
                            src="https://lh3.googleusercontent.com/d/1ER6aW7lGipFE4oZ3LW0vftXyoT9Lmf1n" 
                            alt="Ø´Ø¹Ø§Ø± Ø§Ù„Ù…Ø¯Ø±Ø³Ø© Ø§Ù„Ø£ÙŠØ³Ø±" 
                            class="w-full h-full object-cover rounded-full"
                            onerror="this.style.display='none'; this.parentElement.innerHTML='<div class=\'w-full h-full bg-gradient-to-br from-purple-500 to-purple-700 rounded-full flex items-center justify-center\'><svg class=\'w-8 h-8 text-white\' fill=\'currentColor\' viewBox=\'0 0 24 24\'><path d=\'M12 3L1 9l4 2.18v6L12 21l7-3.82v-6l2-1.09V17h2V9L12 3zm6.82 6L12 12.72 5.18 9 12 5.28 18.82 9zM17 15.99l-5 2.73-5-2.73v-3.72L12 15l5-2.73v3.72z\'/></svg></div>';"
                        >
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container mx-auto px-4 py-8">
        <!-- Search Section -->
        <div class="max-w-2xl mx-auto mb-8">
            <div class="bg-white rounded-2xl p-6 md:p-8 card-shadow">
                <div class="text-center mb-6">
                    <h3 class="text-2xl font-bold text-gray-800 mb-2">Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø·Ø§Ù„Ø¨Ø©</h3>
                    <p class="text-gray-600">Ø£Ø¯Ø®Ù„ Ø±Ù‚Ù… Ø§Ù„Ø·Ø§Ù„Ø¨Ø© Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</p>
                </div>
                
                <div class="space-y-4">
                    <div>
                        <label for="studentId" class="block text-sm font-medium text-gray-700 mb-2">Ø±Ù‚Ù… Ø§Ù„Ø·Ø§Ù„Ø¨Ø©</label>
                        <input 
                            type="text" 
                            id="studentId"
                            placeholder="Ø£Ø¯Ø®Ù„ Ø±Ù‚Ù… Ø§Ù„Ø·Ø§Ù„Ø¨Ø© Ù‡Ù†Ø§..."
                            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent text-lg"
                        >
                    </div>
                    
                    <button 
                        onclick="searchStudent()"
                        class="w-full bg-gradient-to-r from-purple-600 to-pink-600 text-white py-3 px-6 rounded-lg font-semibold hover:from-purple-700 hover:to-pink-700 transition duration-300 flex items-center justify-center"
                    >
                        <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>
                        </svg>
                        Ø¹Ø±Ø¶ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
                    </button>
                </div>
            </div>
        </div>

        <!-- Loading Animation -->
        <div id="loading" class="loading text-center py-8">
            <div class="inline-flex space-x-2">
                <div class="w-3 h-3 bg-purple-600 rounded-full pulse-dot"></div>
                <div class="w-3 h-3 bg-purple-600 rounded-full pulse-dot" style="animation-delay: 0.2s;"></div>
                <div class="w-3 h-3 bg-purple-600 rounded-full pulse-dot" style="animation-delay: 0.4s;"></div>
            </div>
            <p class="text-gray-600 mt-4">Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª...</p>
        </div>

        <!-- Results Section -->
        <div id="results" class="max-w-4xl mx-auto" style="display: none;">
            <div class="bg-white rounded-2xl p-6 md:p-8 card-shadow student-card">
                <div class="text-center mb-6">
                    <div class="inline-block p-3 bg-green-100 rounded-full mb-4">
                        <svg class="w-8 h-8 text-green-600" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
                        </svg>
                    </div>
                    <h3 class="text-2xl font-bold text-gray-800 mb-4">Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø·Ø§Ù„Ø¨Ø©</h3>
                    <button 
                        onclick="exportAsImage()"
                        class="bg-gradient-to-r from-green-600 to-blue-600 text-white py-2 px-6 rounded-lg font-semibold hover:from-green-700 hover:to-blue-700 transition duration-300 flex items-center justify-center mx-auto"
                    >
                        <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M19 12v7H5v-7H3v7c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-7h-2zm-6 .67l2.59-2.58L17 11.5l-5 5-5-5 1.41-1.41L11 12.67V3h2v9.67z"/>
                        </svg>
                        ØªØµØ¯ÙŠØ± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙƒØµÙˆØ±Ø©
                    </button>
                </div>
                
                <div id="studentData" class="space-y-0">
                    <!-- Student data will be populated here -->
                </div>
            </div>
        </div>

        <!-- Error Message -->
        <div id="errorMessage" class="max-w-2xl mx-auto" style="display: none;">
            <div class="bg-red-50 border border-red-200 rounded-2xl p-6 text-center">
                <div class="inline-block p-3 bg-red-100 rounded-full mb-4">
                    <svg class="w-8 h-8 text-red-600" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"/>
                    </svg>
                </div>
                <h3 class="text-xl font-semibold text-red-800 mb-2">Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</h3>
                <p class="text-red-600">ØªØ£ÙƒØ¯ Ù…Ù† Ø±Ù‚Ù… Ø§Ù„Ø·Ø§Ù„Ø¨Ø© ÙˆØ­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰</p>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white py-8 mt-16">
        <div class="container mx-auto px-4 text-center">
            <div class="mb-4">
                <h3 class="text-xl font-bold mb-2">Ù…Ø¯Ø±Ø³Ø© Ø£Ù… Ù…Ø§Ù„Ùƒ Ø§Ù„Ø£Ù†ØµØ§Ø±ÙŠØ© Ø§Ù„Ø°ÙƒÙŠØ©</h3>
                <p class="text-gray-400">Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø·Ù„Ø§Ø¨ Ø§Ù„Ø°ÙƒÙŠ</p>
            </div>
            <div class="border-t border-gray-700 pt-4">
                <p class="text-gray-400 text-sm">&copy; 2024 Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø©</p>
            </div>
        </div>
    </footer>

    <script>
        // Google Sheets CSV URL (converted from the provided HTML URL)
        const SHEET_URL = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vQks_5AP5OYfPYrP6ZqMYRaycIwYf17GYgtPdPL7frTaq2CzQ-5svQpYZjvBVABbELkjYII-wqvhVnr/pub?gid=0&single=true&output=csv';
        
        let studentsData = [];
        
        // Load data from Google Sheets on page load
        window.addEventListener('load', function() {
            loadStudentsData();
        });
        
        async function loadStudentsData() {
            try {
                const response = await fetch(SHEET_URL);
                const csvText = await response.text();
                studentsData = parseCSV(csvText);
                console.log('ØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ù†Ø¬Ø§Ø­:', studentsData.length, 'Ø·Ø§Ù„Ø¨');
            } catch (error) {
                console.error('Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:', error);
            }
        }
        
        function parseCSV(csvText) {
            const lines = csvText.split('\n');
            const headers = lines[0].split(',').map(header => header.trim().replace(/"/g, ''));
            const data = [];
            
            for (let i = 1; i < lines.length; i++) {
                if (lines[i].trim()) {
                    const values = lines[i].split(',').map(value => value.trim().replace(/"/g, ''));
                    const student = {};
                    headers.forEach((header, index) => {
                        student[header] = values[index] || '';
                    });
                    data.push(student);
                }
            }
            
            return data;
        }
        
        function searchStudent() {
            const studentId = document.getElementById('studentId').value.trim();
            
            if (!studentId) {
                alert('ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø±Ù‚Ù… Ø§Ù„Ø·Ø§Ù„Ø¨Ø©');
                return;
            }
            
            // Show loading
            document.getElementById('loading').classList.add('show');
            document.getElementById('results').style.display = 'none';
            document.getElementById('errorMessage').style.display = 'none';
            
            // Simulate search delay
            setTimeout(() => {
                const student = studentsData.find(s => 
                    s['Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ù…Ø¯Ù†ÙŠ'] === studentId || 
                    s['Ø±Ù‚Ù… Ø§Ù„Ø·Ø§Ù„Ø¨'] === studentId || 
                    s['Ø§Ù„Ø±Ù‚Ù…'] === studentId ||
                    Object.values(s).includes(studentId)
                );
                
                document.getElementById('loading').classList.remove('show');
                
                if (student) {
                    displayStudentData(student);
                } else {
                    showErrorMessage();
                }
            }, 1500);
        }
        
        function displayStudentData(student) {
            const studentDataDiv = document.getElementById('studentData');
            studentDataDiv.innerHTML = '';
            
            // Define field categories and their icons
            const fieldCategories = {
                'Ø§Ù„Ø§Ø³Ù…': { icon: 'ğŸ‘¤', category: 'personal', color: 'blue' },
                'Ø§Ø³Ù… Ø§Ù„Ø·Ø§Ù„Ø¨Ø©': { icon: 'ğŸ‘¤', category: 'personal', color: 'blue' },
                'Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ù…Ø¯Ù†ÙŠ': { icon: 'ğŸ†”', category: 'personal', color: 'purple' },
                'Ø±Ù‚Ù… Ø§Ù„Ø·Ø§Ù„Ø¨': { icon: 'ğŸ”¢', category: 'academic', color: 'green' },
                'Ø§Ù„ØµÙ': { icon: 'ğŸ“š', category: 'academic', color: 'green' },
                'Ø§Ù„ÙØµÙ„': { icon: 'ğŸ«', category: 'academic', color: 'green' },
                'Ø§Ù„Ø´Ø¹Ø¨Ø©': { icon: 'ğŸ“', category: 'academic', color: 'green' },
                'ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯': { icon: 'ğŸ“…', category: 'personal', color: 'pink' },
                'Ø§Ù„Ø¹Ù…Ø±': { icon: 'ğŸ‚', category: 'personal', color: 'pink' },
                'Ø§Ù„Ø¬Ù†Ø³ÙŠØ©': { icon: 'ğŸŒ', category: 'personal', color: 'indigo' },
                'Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ': { icon: 'ğŸ“', category: 'contact', color: 'orange' },
                'Ù‡Ø§ØªÙ ÙˆÙ„ÙŠ Ø§Ù„Ø£Ù…Ø±': { icon: 'ğŸ“±', category: 'contact', color: 'orange' },
                'Ø§Ù„Ø¹Ù†ÙˆØ§Ù†': { icon: 'ğŸ ', category: 'contact', color: 'teal' },
                'Ø§Ø³Ù… ÙˆÙ„ÙŠ Ø§Ù„Ø£Ù…Ø±': { icon: 'ğŸ‘¨â€ğŸ‘©â€ğŸ‘§', category: 'family', color: 'red' },
                'Ø§Ù„Ø£Ø¨': { icon: 'ğŸ‘¨', category: 'family', color: 'red' },
                'Ø§Ù„Ø£Ù…': { icon: 'ğŸ‘©', category: 'family', color: 'red' }
            };
            
            // Group fields by category
            const categories = {
                personal: { title: 'Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø´Ø®ØµÙŠØ©', fields: [] },
                academic: { title: 'Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ©', fields: [] },
                contact: { title: 'Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªÙˆØ§ØµÙ„', fields: [] },
                family: { title: 'Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¹Ø§Ø¦Ù„Ø©', fields: [] },
                other: { title: 'Ø¨ÙŠØ§Ù†Ø§Øª Ø£Ø®Ø±Ù‰', fields: [] }
            };
            
            // Categorize fields
            Object.entries(student).forEach(([key, value]) => {
                if (value && value.trim()) {
                    const fieldInfo = fieldCategories[key];
                    if (fieldInfo) {
                        categories[fieldInfo.category].fields.push({ key, value, ...fieldInfo });
                    } else {
                        categories.other.fields.push({ key, value, icon: 'ğŸ“‹', color: 'gray' });
                    }
                }
            });
            
            // Create category sections
            Object.entries(categories).forEach(([categoryKey, category]) => {
                if (category.fields.length > 0) {
                    // Category header
                    const categoryHeader = document.createElement('div');
                    categoryHeader.className = 'mb-4 mt-6 first:mt-0';
                    categoryHeader.innerHTML = `
                        <h4 class="text-lg font-bold text-gray-800 mb-3 flex items-center">
                            <span class="w-8 h-8 bg-gradient-to-r from-purple-500 to-pink-500 rounded-full flex items-center justify-center text-white text-sm ml-3">
                                ${category.fields[0].icon}
                            </span>
                            ${category.title}
                        </h4>
                    `;
                    studentDataDiv.appendChild(categoryHeader);
                    
                    // Category fields grid
                    const fieldsGrid = document.createElement('div');
                    fieldsGrid.className = 'grid md:grid-cols-2 gap-4 mb-6';
                    
                    category.fields.forEach(field => {
                        const fieldCard = document.createElement('div');
                        fieldCard.className = `bg-gradient-to-r from-${field.color}-50 to-${field.color}-100 border border-${field.color}-200 rounded-xl p-4 hover:shadow-md transition-all duration-300 transform hover:-translate-y-1`;
                        
                        // Check if the field value is a URL (contains http or https)
                        const isUrl = field.value && (field.value.includes('http://') || field.value.includes('https://'));
                        
                        fieldCard.innerHTML = `
                            <div class="flex items-start">
                                <div class="flex-shrink-0 w-10 h-10 bg-${field.color}-500 rounded-lg flex items-center justify-center text-white text-lg ml-3">
                                    ${field.icon}
                                </div>
                                <div class="flex-1 min-w-0">
                                    <p class="text-sm font-medium text-${field.color}-800 mb-1">${field.key}</p>
                                    ${isUrl ? 
                                        `<div class="space-y-2">
                                            <p class="text-sm text-gray-600 break-all">${field.value}</p>
                                            <a href="${field.value}" target="_blank" rel="noopener noreferrer" class="inline-flex items-center text-blue-600 hover:text-blue-800 font-semibold underline cursor-pointer transition-colors duration-200">
                                                ${field.key.includes('Ù†ÙˆØ±') ? 'ÙØªØ­ Ù…Ù†ØµØ© Ù†ÙˆØ±' : 'ÙØªØ­ Ø§Ù„Ø±Ø§Ø¨Ø·'}
                                                <svg class="w-4 h-4 mr-1" fill="currentColor" viewBox="0 0 24 24">
                                                    <path d="M19 19H5V5h7V3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2v-7h-2v7zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3h-7z"/>
                                                </svg>
                                            </a>
                                        </div>` : 
                                        `<p class="text-lg font-semibold text-gray-900 break-words">${field.value}</p>`
                                    }
                                </div>
                            </div>
                        `;
                        fieldsGrid.appendChild(fieldCard);
                    });
                    
                    studentDataDiv.appendChild(fieldsGrid);
                }
            });
            
            // Add animation
            studentDataDiv.style.opacity = '0';
            document.getElementById('results').style.display = 'block';
            
            setTimeout(() => {
                studentDataDiv.style.transition = 'opacity 0.5s ease-in-out';
                studentDataDiv.style.opacity = '1';
            }, 100);
            
            document.getElementById('results').scrollIntoView({ behavior: 'smooth' });
        }
        
        function showErrorMessage() {
            document.getElementById('errorMessage').style.display = 'block';
            document.getElementById('errorMessage').scrollIntoView({ behavior: 'smooth' });
        }
        
        // Allow Enter key to search
        document.getElementById('studentId').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                searchStudent();
            }
        });
        
        // Auto-refresh data every 5 minutes
        setInterval(loadStudentsData, 300000);
        
        // Mouse trail effect
        let mouseTrails = [];
        document.addEventListener('mousemove', function(e) {
            // Create trail element
            const trail = document.createElement('div');
            trail.className = 'mouse-trail';
            trail.style.left = (e.clientX - 10) + 'px';
            trail.style.top = (e.clientY - 10) + 'px';
            document.body.appendChild(trail);
            
            // Remove trail after animation
            setTimeout(() => {
                if (trail.parentNode) {
                    trail.parentNode.removeChild(trail);
                }
            }, 800);
        });
        
        // Click ripple effect
        document.addEventListener('click', function(e) {
            const ripple = document.createElement('div');
            ripple.className = 'ripple';
            ripple.style.left = (e.clientX - 25) + 'px';
            ripple.style.top = (e.clientY - 25) + 'px';
            ripple.style.width = '50px';
            ripple.style.height = '50px';
            document.body.appendChild(ripple);
            
            // Remove ripple after animation
            setTimeout(() => {
                if (ripple.parentNode) {
                    ripple.parentNode.removeChild(ripple);
                }
            }, 800);
        });
        
        // Create floating particles
        function createParticles() {
            const particlesContainer = document.getElementById('particles-container');
            if (!particlesContainer) return;
            
            for (let i = 0; i < 20; i++) {
                setTimeout(() => {
                    const particle = document.createElement('div');
                    particle.className = 'particle';
                    particle.style.left = Math.random() * 100 + '%';
                    particle.style.animationDelay = Math.random() * 8 + 's';
                    particle.style.animationDuration = (8 + Math.random() * 4) + 's';
                    particlesContainer.appendChild(particle);
                    
                    // Remove particle after animation
                    setTimeout(() => {
                        if (particle.parentNode) {
                            particle.parentNode.removeChild(particle);
                        }
                    }, 12000);
                }, i * 400);
            }
        }
        
        // Start particle animation
        createParticles();
        setInterval(createParticles, 8000);
        
        // Export student data as image
        function exportAsImage() {
            const resultsDiv = document.getElementById('results');
            const exportButton = document.querySelector('button[onclick="exportAsImage()"]');
            
            // Hide the export button temporarily
            exportButton.style.display = 'none';
            
            // Create a temporary container with school header
            const tempContainer = document.createElement('div');
            tempContainer.style.position = 'absolute';
            tempContainer.style.left = '-9999px';
            tempContainer.style.top = '0';
            tempContainer.style.background = 'white';
            tempContainer.style.padding = '40px';
            tempContainer.style.fontFamily = 'Cairo, sans-serif';
            tempContainer.style.direction = 'rtl';
            tempContainer.style.width = '800px';
            
            // Add school header with logos
            tempContainer.innerHTML = `
                <div style="text-align: center; margin-bottom: 30px; border-bottom: 3px solid #667eea; padding-bottom: 20px;">
                    <div style="display: flex; align-items: center; justify-content: center; margin-bottom: 20px;">
                        <!-- Ø§Ù„Ø´Ø¹Ø§Ø± Ø§Ù„Ø£ÙŠÙ…Ù† -->
                        <div style="width: 70px; height: 70px; background: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; border: 3px solid #667eea; overflow: hidden; margin-left: 20px;">
                            <img src="https://lh3.googleusercontent.com/d/1mtn3vRqkD9EotyQGuBAVxjTKxUyzSr3Y" alt="Ø´Ø¹Ø§Ø± Ø§Ù„Ù…Ø¯Ø±Ø³Ø© Ø§Ù„Ø£ÙŠÙ…Ù†" style="width: 100%; height: 100%; object-fit: cover; border-radius: 50%;">
                        </div>
                        
                        <!-- Ø§Ù„Ù†ØµÙˆØµ -->
                        <div style="text-align: center;">
                            <h1 style="font-size: 28px; font-weight: bold; color: #1f2937; margin: 0 0 10px 0;">Ù†Ø§ÙØ°Ø© Ø£Ù… Ù…Ø§Ù„Ùƒ Ø§Ù„Ø°ÙƒÙŠØ©</h1>
                            <h2 style="font-size: 20px; font-weight: 600; color: #4f46e5; margin: 0 0 10px 0;">Ù…Ø¯Ø±Ø³Ø© Ø£Ù… Ù…Ø§Ù„Ùƒ Ø§Ù„Ø£Ù†ØµØ§Ø±ÙŠØ© Ø§Ù„Ø°ÙƒÙŠØ©</h2>
                            <p style="font-size: 14px; color: #6b7280; margin: 0;">Ø¥Ø¹Ø¯Ø§Ø¯ ÙˆØªÙ†ÙÙŠØ° Ù…Ø¯ÙŠØ±Ø© Ø§Ù„Ù…Ø¯Ø±Ø³Ø©: Ø£.Ø£Ø­Ù„Ø§Ù… Ø¨Ù†Øª Ø¹Ù„ÙŠ Ø§Ù„Ø­Ù…Ø¯Ø§Ù†ÙŠØ©</p>
                        </div>
                        
                        <!-- Ø§Ù„Ø´Ø¹Ø§Ø± Ø§Ù„Ø£ÙŠØ³Ø± -->
                        <div style="width: 70px; height: 70px; background: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; border: 3px solid #667eea; overflow: hidden; margin-right: 20px;">
                            <img src="https://lh3.googleusercontent.com/d/1ER6aW7lGipFE4oZ3LW0vftXyoT9Lmf1n" alt="Ø´Ø¹Ø§Ø± Ø§Ù„Ù…Ø¯Ø±Ø³Ø© Ø§Ù„Ø£ÙŠØ³Ø±" style="width: 100%; height: 100%; object-fit: cover; border-radius: 50%;">
                        </div>
                    </div>
                </div>
            `;
            
            // Clone the student data
            const studentDataClone = document.getElementById('studentData').cloneNode(true);
            tempContainer.appendChild(studentDataClone);
            
            // Add footer
            const footer = document.createElement('div');
            footer.style.marginTop = '30px';
            footer.style.paddingTop = '20px';
            footer.style.borderTop = '2px solid #e5e7eb';
            footer.style.textAlign = 'center';
            footer.style.fontSize = '12px';
            footer.style.color = '#6b7280';
            footer.innerHTML = `
                <p>ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ù‡Ø°Ø§ Ø§Ù„ØªÙ‚Ø±ÙŠØ± ÙÙŠ: ${new Date().toLocaleDateString('ar-SA')}</p>
                <p>&copy; 2024 Ù…Ø¯Ø±Ø³Ø© Ø£Ù… Ù…Ø§Ù„Ùƒ Ø§Ù„Ø£Ù†ØµØ§Ø±ÙŠØ© Ø§Ù„Ø°ÙƒÙŠØ© - Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø©</p>
            `;
            tempContainer.appendChild(footer);
            
            document.body.appendChild(tempContainer);
            
            // Capture the image
            html2canvas(tempContainer, {
                backgroundColor: '#ffffff',
                scale: 2,
                useCORS: true,
                allowTaint: true,
                width: 800,
                height: tempContainer.scrollHeight
            }).then(canvas => {
                // Create download link
                const link = document.createElement('a');
                link.download = `Ø¨ÙŠØ§Ù†Ø§Øª_Ø§Ù„Ø·Ø§Ù„Ø¨Ø©_${new Date().getTime()}.png`;
                link.href = canvas.toDataURL('image/png');
                link.click();
                
                // Clean up
                document.body.removeChild(tempContainer);
                exportButton.style.display = 'flex';
                
                // Show success message
                const successMsg = document.createElement('div');
                successMsg.className = 'fixed top-4 right-4 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg z-50';
                successMsg.innerHTML = 'âœ… ØªÙ… ØªØµØ¯ÙŠØ± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ù†Ø¬Ø§Ø­!';
                document.body.appendChild(successMsg);
                
                setTimeout(() => {
                    if (successMsg.parentNode) {
                        successMsg.parentNode.removeChild(successMsg);
                    }
                }, 3000);
            }).catch(error => {
                console.error('Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªØµØ¯ÙŠØ±:', error);
                document.body.removeChild(tempContainer);
                exportButton.style.display = 'flex';
                
                // Show error message
                const errorMsg = document.createElement('div');
                errorMsg.className = 'fixed top-4 right-4 bg-red-500 text-white px-6 py-3 rounded-lg shadow-lg z-50';
                errorMsg.innerHTML = 'âŒ Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªØµØ¯ÙŠØ±';
                document.body.appendChild(errorMsg);
                
                setTimeout(() => {
                    if (errorMsg.parentNode) {
                        errorMsg.parentNode.removeChild(errorMsg);
                    }
                }, 3000);
            });
        }
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'98211928c7da4e98',t:'MTc1ODM2ODk1NC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
